!function(t){if(!t.preview){t.assetContainers.main.isExpandable=!0;try{var e=!!window.frameElement,n=e?window.frameElement.parentNode.firstChild.firstChild.contentWindow:window;t.overrides=t.overrides||{},t.overrides.displayWindowTarget=n}catch(t){console.warn("Failed to find target iframe in player environment: Has the structure changed?\n",t)}}var i=!1;if(!t.overrides||t.overrides.displayWindowTarget!=self)for(var a in t.assetContainers)if(t.assetContainers.hasOwnProperty(a)){var o=t.assetContainers[a];if("inlineDiv"!=o.type||o.isExpandable){i=!0;break}}if(t.overrides&&t.overrides.displayWindowTarget){var d=t.overrides.displayWindowTarget;d="undefined"!=typeof adtechIframeHashArray&&self!=top?d.parent:d}else{for(var r=null,s=parent;void 0!=s;){try{var c=s.document;c&&(r=s)}catch(t){}s=s==top?null:s.parent}var d=r||top}var h=!1;try{var c=d.document;c&&(h=!0)}catch(t){}var l=i&&self!=top&&h?d:self;l.com=l.com||{},l.com.adtech=l.com.adtech||{},l.com.adtech.AdtechCustomAd$AD_ID$=function(){};var v=l.com.adtech.AdtechCustomAd$AD_ID$;v.prototype.elem={},v.prototype.elem.topWin=window.parent,v.prototype.elem.targetWindow=l,v.prototype.tools={events:{triggerEvent:function(t,e){var n;document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):document.createEventObject&&(n=document.createEventObject(),n.eventType=e),n.eventName=e,t.dispatchEvent?t.dispatchEvent(n):t.fireEvent&&htmlEvents["on"+e]?t.fireEvent("on"+n.eventType,n):t[e]?t[e]():t["on"+e]&&t["on"+e]()},addEvent:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&htmlEvents["on"+e]?t.attachEvent("on"+e,n):t["on"+e]=n},removeEvent:function(t,e,n){t.removeventListener?t.removeEventListener(e,n,!1):t.detachEvent&&htmlEvents["on"+e]?t.detachEvent("on"+e,n):t["on"+e]=null}},mask:function(t,e){},getPercentage:function(t,e){return t/100*e},getSizeStyle:function(t,e){var n=(this.tools,{}),i=parseInt(t,10),t=t.split(i)[1];return data={num:isNaN(parseFloat(i))?0:i,val:void 0!==t?t:"px"},"%"==data.val?(n.px=Math.round(e/100*data.num),n.percent=data.num):(n.px=data.num,n.percent=data.num/e*100),n},getViewportSize:function(t){if(t=t||window,null!=t.innerWidth)return{w:t.innerWidth,h:t.innerHeight};var e=t.document;return"CSS1Compat"==document.compatMode?{w:e.documentElement.clientWidth,h:e.documentElement.clientHeight}:{w:e.body.clientWidth,h:e.body.clientHeight}}},v.prototype.declareEvents=function(t){ADTECH.event("RYOT_PARENT_META"),ADTECH.event("RYOT_RESIZE"),ADTECH.event("RYOT_FILLWIDTH"),ADTECH.event("RYOT_CHILD_META"),ADTECH.event("RYOT_CHILD_RESIZE")},v.prototype.preInit=function(){null!=window&&(window.com=com||{},com.adtech=window.com.adtech)},v.prototype.init=function(t){this.advert=t,this.elem.adContainer=t.assetContainers.main.anchorDiv,this.elem.adContent=t.assetContainers.main.anchorDiv.firstChild,this.elem.adIframe=this.elem.adContent.getElementsByTagName("iframe")[0],this.elem.adBody=document||this.elem.adIframe.contentWindow.document,this.lib={},this.lib.utils=l.com.adtech.Utils_$VERSION$,this.lib.globalEventBus=l.adtechAdManager_$VERSION$.globalEventBus,this.lib.richMediaEvent=l.com.adtech.RichMediaEvent_$VERSION$,this.metaData={},this.recieveMeta()},v.prototype.data={topPosition:0,scrollTop:0,winWidth:0,winHeight:0,docHeight:0},v.prototype.whenReady=function(){this.handleParentData(),this.sendMeta()},v.prototype.handleParentData=function(){this.setupScrollData(),this.getAdWrapperPosition(),this.setAdHeight(),this.setupResize()},v.prototype.dispatchEvent=function(t,e){var n=new this.lib.richMediaEvent(t),e=e||{};n.meta=e,this.advert.eventBus.dispatchEvent(n)},v.prototype.sendMeta=function(){var t=this;setInterval(function(){t.dispatchEvent("RYOT_PARENT_META",t.data)},100)},v.prototype.recieveMeta=function(){var t=this;this.advert.eventBus.addEventListener("RYOT_CHILD_META",function(e){t.data.docHeight=e.meta.docHeight,t.setAdHeight(e.meta.docHeight,!0),t.whenReady()}),this.advert.eventBus.addEventListener("RYOT_FILLWIDTH",function(e){t.setAdToFillContainer(),t.setAdHeight(t.data.docHeight)})},v.prototype.getAdWrapperPosition=function(){var t=this.elem.adContainer,e=document.body.getBoundingClientRect(),n=t.getBoundingClientRect(),i=n.top-e.top;this.data.topPosition=i},v.prototype.setupScrollData=function(){function t(){var t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}function e(e){n.data.scrollTop=t()}var n=this;window.addEventListener("scroll",e,!1);t(),(new Date).getTime();this.data.scrollTop=t()},v.prototype.setupResize=function(){var t=this,e=t.getWindowSize();t.data.winWidth=e.width,t.data.winHeight=e.height,window.addEventListener("resize",function(){t.dispatchEvent("RYOT_RESIZE",t.data)},!0),this.advert.eventBus.addEventListener("RYOT_CHILD_RESIZE",function(e){var n=t.getWindowSize();t.data.winWidth=n.width,t.data.winHeight=n.height,t.setAdHeight(e.meta.docHeight)})},v.prototype.getWindowSize=function(){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return{width:t.innerWidth||n.clientWidth||i.clientWidth,height:t.innerHeight||n.clientHeight||i.clientHeight}},v.prototype.setAdHeight=function(t,e){if(void 0!==t){var n=this.elem.adContainer,i=this.elem.adContent,a=i.firstChild;this.elem.docBody;n.style.height="auto",i.style.clip="",n.style.position="absolute",n.style.left=0,n.style.top=0,t===this.data.docHeight&&1!=e||(n.style.height=t+"px",i.style.height=t+"px",a.style.height=t+"px",this.data.docHeight=t)}},v.prototype.setAdToFillContainer=function(){var t=this.elem.adContainer,e=this.elem.adContent,n=e.firstChild;this.elem.docBody;t.style.width="100%",e.style.width="100%",n.style.width="100%",n.width="100%",this.setAdHeight()},l.adtechCallbackInstances=l.adtechCallbackInstances||[];var p=l.adtechCallbackInstances.length;l.adtechCallbackInstances[p]=new l.com.adtech.AdtechCustomAd$AD_ID$,l.adtechAdCallbacks=l.adtechAdCallbacks||{},l.adtechAdCallbacks[t.adServerVars.uid]=l.adtechAdCallbacks[t.adServerVars.uid]||[],l.adtechAdCallbacks[t.adServerVars.uid].push(l.adtechCallbackInstances[p])}(adtechAdConfig);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbUFkLndyYXBwZXIuanMiXSwibmFtZXMiOlsiYWRDb25maWciLCJwcmV2aWV3IiwiYXNzZXRDb250YWluZXJzIiwibWFpbiIsImlzRXhwYW5kYWJsZSIsInBhcmVudENoZWNrIiwid2luZG93IiwiZnJhbWVFbGVtZW50IiwidGFyZ2V0V2luIiwicGFyZW50Tm9kZSIsImZpcnN0Q2hpbGQiLCJjb250ZW50V2luZG93Iiwib3ZlcnJpZGVzIiwiZGlzcGxheVdpbmRvd1RhcmdldCIsImUiLCJjb25zb2xlIiwid2FybiIsInJlcXVpcmVzQnJlYWtvdXQiLCJzZWxmIiwiaWQiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbnRhaW5lciIsInR5cGUiLCJhZHRlY2hJZnJhbWVIYXNoQXJyYXkiLCJ0b3AiLCJwYXJlbnQiLCJjYWxjdWxhdGVkVGFyZ2V0IiwiY3VycmVudFdpbmRvdyIsInVuZGVmaW5lZCIsInRhcmdldERvYyIsImRvY3VtZW50IiwidGFyZ2V0SXNGcmllbmRseSIsInRhcmdldFdpbmRvdyIsImNvbSIsImFkdGVjaCIsIkFkdGVjaEN1c3RvbUFkJEFEX0lEJCIsImN1c3RvbUFkIiwicHJvdG90eXBlIiwiZWxlbSIsInRvcFdpbiIsInRvb2xzIiwiZXZlbnRzIiwidHJpZ2dlckV2ZW50IiwiZWwiLCJldmVudE5hbWUiLCJldmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJldmVudFR5cGUiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50IiwiaHRtbEV2ZW50cyIsImFkZEV2ZW50IiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsInJlbW92ZUV2ZW50IiwicmVtb3ZldmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwibWFzayIsInZhbCIsImdldFBlcmNlbnRhZ2UiLCJudW0iLCJwZXJjZW50YWdlIiwiZ2V0U2l6ZVN0eWxlIiwic2l6ZSIsInByb2Nlc3NlZCIsInRoaXMiLCJwYXJzZUludCIsInNwbGl0IiwiZGF0YSIsImlzTmFOIiwicGFyc2VGbG9hdCIsIk1hdGgiLCJyb3VuZCIsImdldFZpZXdwb3J0U2l6ZSIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwiZCIsImNvbXBhdE1vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImJvZHkiLCJkZWNsYXJlRXZlbnRzIiwiYWR2ZXJ0IiwiQURURUNIIiwicHJlSW5pdCIsImluaXQiLCJhZENvbnRhaW5lciIsImFuY2hvckRpdiIsImFkQ29udGVudCIsImFkSWZyYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhZEJvZHkiLCJsaWIiLCJ1dGlscyIsIlV0aWxzXyRWRVJTSU9OJCIsImdsb2JhbEV2ZW50QnVzIiwiYWR0ZWNoQWRNYW5hZ2VyXyRWRVJTSU9OJCIsInJpY2hNZWRpYUV2ZW50IiwiUmljaE1lZGlhRXZlbnRfJFZFUlNJT04kIiwibWV0YURhdGEiLCJyZWNpZXZlTWV0YSIsInRvcFBvc2l0aW9uIiwic2Nyb2xsVG9wIiwid2luV2lkdGgiLCJ3aW5IZWlnaHQiLCJkb2NIZWlnaHQiLCJ3aGVuUmVhZHkiLCJoYW5kbGVQYXJlbnREYXRhIiwic2VuZE1ldGEiLCJzZXR1cFNjcm9sbERhdGEiLCJnZXRBZFdyYXBwZXJQb3NpdGlvbiIsInNldEFkSGVpZ2h0Iiwic2V0dXBSZXNpemUiLCJtZXRhIiwiZXZlbnRCdXMiLCJzZXRJbnRlcnZhbCIsInNldEFkVG9GaWxsQ29udGFpbmVyIiwiZWxlbWVudCIsImJvZHlSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZWxlbVJlY3QiLCJnZXRTY3JvbGxUb3AiLCJkb2MiLCJwYWdlWU9mZnNldCIsImNsaWVudFRvcCIsIndoZWVsIiwiRGF0ZSIsImdldFRpbWUiLCJ3aW5TaXplIiwiZ2V0V2luZG93U2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiZyIsImZvcmNlIiwidG9wV3JhcHBlciIsImNvbnRlbnRXcmFwcGVyIiwiaWZyYW1lIiwiZG9jQm9keSIsInN0eWxlIiwiY2xpcCIsInBvc2l0aW9uIiwibGVmdCIsImFkdGVjaENhbGxiYWNrSW5zdGFuY2VzIiwiaW5zdGFuY2VJbmRleCIsImxlbmd0aCIsImFkdGVjaEFkQ2FsbGJhY2tzIiwiYWRTZXJ2ZXJWYXJzIiwidWlkIiwicHVzaCIsImFkdGVjaEFkQ29uZmlnIl0sIm1hcHBpbmdzIjoiQ0FLQSxTQUFVQSxHQU1SLElBQUtBLEVBQVNDLFFBQVMsQ0FDckJELEVBQVNFLGdCQUFnQkMsS0FBS0MsY0FBZSxDQUM3QyxLQUNFLEdBQUlDLEtBQWNDLE9BQU9DLGFBQ3JCQyxFQUFZSCxFQUFjQyxPQUFPQyxhQUFhRSxXQUFXQyxXQUFXQSxXQUFXQyxjQUFnQkwsTUFDbkdOLEdBQVNZLFVBQVlaLEVBQVNZLGNBQzlCWixFQUFTWSxVQUFVQyxvQkFBc0JMLEVBQ3pDLE1BQU1NLEdBQ05DLFFBQVFDLEtBQUssbUZBQW9GRixJQUlyRyxHQUFJRyxJQUFtQixDQUN2QixLQUFLakIsRUFBU1ksV0FBYVosRUFBU1ksVUFBVUMscUJBQXVCSyxLQUNuRSxJQUFLLEdBQUlDLEtBQU1uQixHQUFTRSxnQkFDdEIsR0FBSUYsRUFBU0UsZ0JBQWdCa0IsZUFBZUQsR0FBSyxDQUMvQyxHQUFJRSxHQUFZckIsRUFBU0UsZ0JBQWdCaUIsRUFDekMsSUFBc0IsYUFBbEJFLEVBQVVDLE1BQXVCRCxFQUFVakIsYUFBYyxDQUMzRGEsR0FBbUIsQ0FDbkIsUUFNUixHQUFJakIsRUFBU1ksV0FBYVosRUFBU1ksVUFBVUMsb0JBQXFCLENBQ2hFLEdBQUlBLEdBQXNCYixFQUFTWSxVQUFVQyxtQkFDN0NBLEdBQXVELG1CQUF6QlUsd0JBQXdDTCxNQUFRTSxJQUMxRVgsRUFBb0JZLE9BQVNaLE1BQzVCLENBR0wsSUFGQSxHQUFJYSxHQUFtQixLQUNuQkMsRUFBZ0JGLFdBQ0lHLElBQWpCRCxHQUE0QixDQUNqQyxJQUNFLEdBQUlFLEdBQVlGLEVBQWNHLFFBQzFC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QU1DLEtBQU8sR0FDNUJMLEVBQVdJLE1BQU1FLFNBQVcsV0FDNUJOLEVBQVdJLE1BQU1HLEtBQU8sRUFDeEJQLEVBQVdJLE1BQU16SCxJQUFNLEVBRW5Ca0gsSUFBU3JFLEtBQUtHLEtBQUt3QyxXQUFvQixHQUFQNEIsSUFNbENDLEVBQVdJLE1BQU1QLE9BQVNBLEVBQVMsS0FHbkNJLEVBQWVHLE1BQU1QLE9BQVNBLEVBQVMsS0FHdkNLLEVBQU9FLE1BQU1QLE9BQVNBLEVBQVMsS0FHL0JyRSxLQUFLRyxLQUFLd0MsVUFBWTBCLEtBSTFCdEcsRUFBU0MsVUFBVXNGLHFCQUF1QixXQUV4QyxHQUFJa0IsR0FBYXhFLEtBQUsvQixLQUFLdUQsWUFDdkJpRCxFQUFpQnpFLEtBQUsvQixLQUFLeUQsVUFDM0JnRCxFQUFTRCxFQUFlcEksVUFDZDJELE1BQUsvQixLQUFLMEcsT0FFeEJILEdBQVdJLE1BQU1SLE1BQVEsT0FDekJLLEVBQWVHLE1BQU1SLE1BQVEsT0FDN0JNLEVBQU9FLE1BQU1SLE1BQVEsT0FDckJNLEVBQU9OLE1BQVEsT0FHZnBFLEtBQUtpRCxlQUdQdEYsRUFBYXFILHdCQUEwQnJILEVBQWFxSCwyQkFDcEQsSUFBSUMsR0FBZ0J0SCxFQUFhcUgsd0JBQXdCRSxNQUN6RHZILEdBQWFxSCx3QkFBd0JDLEdBQWlCLEdBQUl0SCxHQUFhQyxJQUFJQyxPQUFPQyxzQkFFbEZILEVBQWF3SCxrQkFBb0J4SCxFQUFhd0gsc0JBQzlDeEgsRUFBYXdILGtCQUFrQnhKLEVBQVN5SixhQUFhQyxLQUNqRDFILEVBQWF3SCxrQkFBa0J4SixFQUFTeUosYUFBYUMsU0FDekQxSCxFQUFhd0gsa0JBQWtCeEosRUFBU3lKLGFBQWFDLEtBQUtDLEtBQ3REM0gsRUFBYXFILHdCQUF3QkMsS0FDeENNIiwiZmlsZSI6ImN1c3RvbUFkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCb2lsZXJwbGF0ZSBjb2RlIHJlcXVpcmVkIHRvIGhvb2sgaW50byB0aGUgQURURUNIIHJpY2ggbWVkaWEgbGlicmFyeS5cbiAqXG4gKiBGb3IgQVBJIGRvY3VtZW50YXRpb24sIHBsZWFzZSBjb250YWN0IGNhbnZhcy1oZWxwQGFkdGVjaC5jb21cbiAqL1xuKGZ1bmN0aW9uKGFkQ29uZmlnKSB7XG5cbiAgLypcbiAgICogVmlkaWJsZSBjaGVja1xuICAgKiBUaGlzIGFzc2lnbnMgdGhlIHZpZGlibGUgcGFyZW50IHdpbmRvdyBhcyB0aGUgdGFyZ2V0IHdpbmRvd1xuICAgKi9cbiAgaWYgKCFhZENvbmZpZy5wcmV2aWV3KSB7XG4gICAgYWRDb25maWcuYXNzZXRDb250YWluZXJzLm1haW4uaXNFeHBhbmRhYmxlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgdmFyIHBhcmVudENoZWNrID0gd2luZG93LmZyYW1lRWxlbWVudCA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHZhciB0YXJnZXRXaW4gPSBwYXJlbnRDaGVjayA/IHdpbmRvdy5mcmFtZUVsZW1lbnQucGFyZW50Tm9kZS5maXJzdENoaWxkLmZpcnN0Q2hpbGQuY29udGVudFdpbmRvdyA6IHdpbmRvdztcbiAgICAgIGFkQ29uZmlnLm92ZXJyaWRlcyA9IGFkQ29uZmlnLm92ZXJyaWRlcyB8fCB7fTtcbiAgICAgIGFkQ29uZmlnLm92ZXJyaWRlcy5kaXNwbGF5V2luZG93VGFyZ2V0ID0gdGFyZ2V0V2luO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZmluZCB0YXJnZXQgaWZyYW1lIGluIHBsYXllciBlbnZpcm9ubWVudDogSGFzIHRoZSBzdHJ1Y3R1cmUgY2hhbmdlZD9cXG4nLCBlKTtcbiAgICB9XG4gIH1cbiAgXG4gIHZhciByZXF1aXJlc0JyZWFrb3V0ID0gZmFsc2U7XG4gIGlmICghYWRDb25maWcub3ZlcnJpZGVzIHx8IGFkQ29uZmlnLm92ZXJyaWRlcy5kaXNwbGF5V2luZG93VGFyZ2V0ICE9IHNlbGYpIHtcbiAgICBmb3IgKHZhciBpZCBpbiBhZENvbmZpZy5hc3NldENvbnRhaW5lcnMpIHtcbiAgICAgIGlmIChhZENvbmZpZy5hc3NldENvbnRhaW5lcnMuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBhZENvbmZpZy5hc3NldENvbnRhaW5lcnNbaWRdO1xuICAgICAgICBpZiAoY29udGFpbmVyLnR5cGUgIT0gJ2lubGluZURpdicgfHwgY29udGFpbmVyLmlzRXhwYW5kYWJsZSkge1xuICAgICAgICAgIHJlcXVpcmVzQnJlYWtvdXQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGFkQ29uZmlnLm92ZXJyaWRlcyAmJiBhZENvbmZpZy5vdmVycmlkZXMuZGlzcGxheVdpbmRvd1RhcmdldCkge1xuICAgIHZhciBkaXNwbGF5V2luZG93VGFyZ2V0ID0gYWRDb25maWcub3ZlcnJpZGVzLmRpc3BsYXlXaW5kb3dUYXJnZXQ7XG4gICAgZGlzcGxheVdpbmRvd1RhcmdldCA9ICh0eXBlb2YgYWR0ZWNoSWZyYW1lSGFzaEFycmF5ICE9ICd1bmRlZmluZWQnICYmIHNlbGYgIT0gdG9wKSA/XG4gICAgICAgIGRpc3BsYXlXaW5kb3dUYXJnZXQucGFyZW50IDogZGlzcGxheVdpbmRvd1RhcmdldDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY2FsY3VsYXRlZFRhcmdldCA9IG51bGw7XG4gICAgdmFyIGN1cnJlbnRXaW5kb3cgPSBwYXJlbnQ7XG4gICAgd2hpbGUgKGN1cnJlbnRXaW5kb3cgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0RG9jID0gY3VycmVudFdpbmRvdy5kb2N1bWVudDtcbiAgICAgICAgaWYgKHRhcmdldERvYykge1xuICAgICAgICAgIGNhbGN1bGF0ZWRUYXJnZXQgPSBjdXJyZW50V2luZG93O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICBjdXJyZW50V2luZG93ID0gKGN1cnJlbnRXaW5kb3cgPT0gdG9wKSA/IG51bGwgOiBjdXJyZW50V2luZG93LnBhcmVudDtcbiAgICB9XG4gICAgdmFyIGRpc3BsYXlXaW5kb3dUYXJnZXQgPSBjYWxjdWxhdGVkVGFyZ2V0IHx8IHRvcDtcbiAgfVxuXG4gIHZhciB0YXJnZXRJc0ZyaWVuZGx5ID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgdmFyIHRhcmdldERvYyA9IGRpc3BsYXlXaW5kb3dUYXJnZXQuZG9jdW1lbnQ7XG4gICAgaWYgKHRhcmdldERvYykge1xuICAgICAgdGFyZ2V0SXNGcmllbmRseSA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG5cbiAgdmFyIHRhcmdldFdpbmRvdyA9IChyZXF1aXJlc0JyZWFrb3V0ICYmIChzZWxmICE9IHRvcCAmJiB0YXJnZXRJc0ZyaWVuZGx5KSkgP1xuICAgICAgICAgIGRpc3BsYXlXaW5kb3dUYXJnZXQgOiBzZWxmO1xuICBcbiAgdGFyZ2V0V2luZG93LmNvbSA9IHRhcmdldFdpbmRvdy5jb20gfHwge307XG4gIHRhcmdldFdpbmRvdy5jb20uYWR0ZWNoID0gdGFyZ2V0V2luZG93LmNvbS5hZHRlY2ggfHwge307XG5cbiAgLypcbiAgICogQ3VzdG9tQWQuanMgQ29uc3RydWN0b3JcbiAgICovXG4gIHRhcmdldFdpbmRvdy5jb20uYWR0ZWNoLkFkdGVjaEN1c3RvbUFkJEFEX0lEJCA9IGZ1bmN0aW9uKCkge307XG4gIFxuICAvKlxuICAgKiBJbmNsdWRlIHBhcnRpYWxzXG4gICAqL1xuICAvLyBDb3JlIGNsYXNzXG4gIC8qKlxuICAgKiBDdXN0b21BZC5qcyBQcm90b3R5cGUgLSBhdHRhY2hlZCB0byBDdXN0b21BZCBwcm90b3R5cGVcbiAgICovXG4gIHZhciBjdXN0b21BZCA9IHRhcmdldFdpbmRvdy5jb20uYWR0ZWNoLkFkdGVjaEN1c3RvbUFkJEFEX0lEJDtcbiAgXG4gIC8vIEFkZCB3aW5kb3cgb2JqZWN0cyB0byBlbGVtZW50cyBwcm9wZXJ0eVxuICBjdXN0b21BZC5wcm90b3R5cGUuZWxlbSA9IHt9O1xuICBjdXN0b21BZC5wcm90b3R5cGUuZWxlbS50b3BXaW4gPSB3aW5kb3cucGFyZW50O1xuICBjdXN0b21BZC5wcm90b3R5cGUuZWxlbS50YXJnZXRXaW5kb3cgPSB0YXJnZXRXaW5kb3c7XG4gIFxuICAvLyBUb29sa2l0XG4gIC8qKlxuICAgKiBDdXN0b20gQWQgVG9vbHNcbiAgICovXG4gIGN1c3RvbUFkLnByb3RvdHlwZS50b29scyA9IHtcbiAgICBldmVudHMgOiB7XG4gICAgICB0cmlnZ2VyRXZlbnQgOiBmdW5jdGlvbihlbCwgZXZlbnROYW1lKXtcbiAgICAgICAgdmFyIGV2ZW50O1xuICAgICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcbiAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XG4gICAgICAgICAgZXZlbnQuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QpIHsvLyBJRSA8IDlcbiAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgICAgZXZlbnQuZXZlbnRUeXBlID0gZXZlbnROYW1lO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbC5maXJlRXZlbnQgJiYgaHRtbEV2ZW50c1snb24nK2V2ZW50TmFtZV0pIHsvLyBJRSA8IDlcbiAgICAgICAgICBlbC5maXJlRXZlbnQoJ29uJytldmVudC5ldmVudFR5cGUsZXZlbnQpOy8vIGNhbiB0cmlnZ2VyIG9ubHkgcmVhbCBldmVudCAoZS5nLiAnY2xpY2snKVxuICAgICAgICB9IGVsc2UgaWYgKGVsW2V2ZW50TmFtZV0pe1xuICAgICAgICAgIGVsW2V2ZW50TmFtZV0oKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbFsnb24nK2V2ZW50TmFtZV0pIHtcbiAgICAgICAgICBlbFsnb24nK2V2ZW50TmFtZV0oKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkZEV2ZW50IDogZnVuY3Rpb24oZWwsIHR5cGUsIGhhbmRsZXIpe1xuICAgICAgICBpZiAoZWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSxoYW5kbGVyLGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbC5hdHRhY2hFdmVudCAmJiBodG1sRXZlbnRzWydvbicrdHlwZV0pey8vIElFIDwgOVxuICAgICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicrdHlwZSxoYW5kbGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbFsnb24nK3R5cGVdPWhhbmRsZXI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZW1vdmVFdmVudCA6IGZ1bmN0aW9uKGVsLCB0eXBlLCBoYW5kbGVyKXtcbiAgICAgICAgaWYoZWwucmVtb3ZldmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLGhhbmRsZXIsZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsLmRldGFjaEV2ZW50ICYmIGh0bWxFdmVudHNbJ29uJyt0eXBlXSl7Ly8gSUUgPCA5XG4gICAgICAgICAgZWwuZGV0YWNoRXZlbnQoJ29uJyt0eXBlLGhhbmRsZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsWydvbicrdHlwZV09bnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbWFzayA6IGZ1bmN0aW9uKGVsZW0sIHZhbCkge1xuICAgICAgLy8gZWxlbS5zdHlsZS5jbGlwID0gJ3JlY3QoJyt2YWwrJyknO1xuICAgIH0sXG4gICAgZ2V0UGVyY2VudGFnZSA6IGZ1bmN0aW9uKG51bSwgcGVyY2VudGFnZSkge1xuICAgICAgcmV0dXJuIChudW0gLyAxMDApICogcGVyY2VudGFnZTtcbiAgICB9LFxuICAgIC8qXG4gICAgICogUmV0dXJuIHBpeGVsICsgcGVyY2VudCB2YWx1ZXMgZnJvbSBpbnRlZ2VyIC8gc3RyaW5nICwgZWcgJzEwJSdcbiAgICAgKi9cbiAgICBnZXRTaXplU3R5bGUgOiBmdW5jdGlvbih2YWwsIHNpemUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCwgc2l6ZSlcbiAgICAgIHZhciB0b29scyA9IHRoaXMudG9vbHM7XG4gICAgICB2YXIgcHJvY2Vzc2VkID0ge307XG4gICAgICB2YXIgbnVtID0gcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgICB2YXIgdmFsID0gdmFsLnNwbGl0KG51bSlbMV07XG4gICAgICBkYXRhID0ge1xuICAgICAgICBudW0gOiAoaXNOYU4ocGFyc2VGbG9hdCgobnVtKSkpID8gMCA6IG51bSksXG4gICAgICAgIHZhbCA6ICh0eXBlb2YgdmFsIT09J3VuZGVmaW5lZCcgPyB2YWwgOiAncHgnKVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEudmFsPT0nJScpIHtcbiAgICAgICAgcHJvY2Vzc2VkWydweCddID0gTWF0aC5yb3VuZCgoc2l6ZSAvIDEwMCkgKiBkYXRhLm51bSk7XG4gICAgICAgIHByb2Nlc3NlZFsncGVyY2VudCddID0gZGF0YS5udW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzZWRbJ3B4J10gPSBkYXRhLm51bTtcbiAgICAgICAgcHJvY2Vzc2VkWydwZXJjZW50J10gPSBkYXRhLm51bSAvIHNpemUgKiAxMDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvY2Vzc2VkO1xuICAgIH0sXG4gICAgZ2V0Vmlld3BvcnRTaXplIDogZnVuY3Rpb24odykge1xuICAgICAgLy8gVXNlIHRoZSBzcGVjaWZpZWQgd2luZG93IG9yIHRoZSBjdXJyZW50IHdpbmRvdyBpZiBubyBhcmd1bWVudFxuICAgICAgdyA9IHcgfHwgd2luZG93O1xuICBcbiAgICAgIC8vIFRoaXMgd29ya3MgZm9yIGFsbCBicm93c2VycyBleGNlcHQgSUU4IGFuZCBiZWZvcmVcbiAgICAgIGlmICh3LmlubmVyV2lkdGggIT0gbnVsbCkgcmV0dXJuIHsgdzogdy5pbm5lcldpZHRoLCBoOiB3LmlubmVySGVpZ2h0IH07XG4gIFxuICAgICAgLy8gRm9yIElFIChvciBhbnkgYnJvd3NlcikgaW4gU3RhbmRhcmRzIG1vZGVcbiAgICAgIHZhciBkID0gdy5kb2N1bWVudDtcbiAgICAgIGlmIChkb2N1bWVudC5jb21wYXRNb2RlID09IFwiQ1NTMUNvbXBhdFwiKVxuICAgICAgICAgIHJldHVybiB7IHc6IGQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgIGg6IGQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB9O1xuICBcbiAgICAgIC8vIEZvciBicm93c2VycyBpbiBRdWlya3MgbW9kZVxuICAgICAgcmV0dXJuIHsgdzogZC5ib2R5LmNsaWVudFdpZHRoLCBoOiBkLmJvZHkuY2xpZW50SGVpZ2h0IH07XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEV2ZW50cyBsaXN0XG4gICAqIFRoaXMgbWV0aG9kIGlzIG5ldmVyIHVzZWQsIG9ubHkgaGVyZSBmb3IgT05FIHRvIHBhcnNlXG4gICAqL1xuICBjdXN0b21BZC5wcm90b3R5cGUuZGVjbGFyZUV2ZW50cyA9IGZ1bmN0aW9uKGFkdmVydCkge1xuICAgIFxuICAgIC8vIFBhcmVudCBldmVudHNcbiAgICBBRFRFQ0guZXZlbnQoJ1JZT1RfUEFSRU5UX01FVEEnKTtcbiAgICBBRFRFQ0guZXZlbnQoJ1JZT1RfUkVTSVpFJyk7XG4gICAgQURURUNILmV2ZW50KCdSWU9UX0ZJTExXSURUSCcpO1xuICBcbiAgICAvLyBDaGlsZCBldmVudHNcbiAgICBBRFRFQ0guZXZlbnQoJ1JZT1RfQ0hJTERfTUVUQScpO1xuICAgIEFEVEVDSC5ldmVudCgnUllPVF9DSElMRF9SRVNJWkUnKTtcbiAgXG4gIH07XG4gIFxuICAvKipcbiAgICogcHJlSW5pdCBNZXRob2RcbiAgICovXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5wcmVJbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdz09bnVsbCkgcmV0dXJuO1xuICAgIHdpbmRvdy5jb20gPSBjb20gfHwge307XG4gICAgY29tLmFkdGVjaCA9IHdpbmRvdy5jb20uYWR0ZWNoO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEluaXQgY3VzdG9tQWRcbiAgICovXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oYWR2ZXJ0KSB7XG4gICAgXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICBcbiAgICAvLyBBRFRFQ0ggYWR2ZXJ0IGRhdGEgb2JqZWN0XG4gICAgdGhpcy5hZHZlcnQgPSBhZHZlcnQ7XG4gIFxuICAgIC8vIEVsZW1lbnRzXG4gICAgdGhpcy5lbGVtLmFkQ29udGFpbmVyID0gYWR2ZXJ0LmFzc2V0Q29udGFpbmVycy5tYWluLmFuY2hvckRpdjtcbiAgICB0aGlzLmVsZW0uYWRDb250ZW50ID0gYWR2ZXJ0LmFzc2V0Q29udGFpbmVycy5tYWluLmFuY2hvckRpdi5maXJzdENoaWxkO1xuICAgIHRoaXMuZWxlbS5hZElmcmFtZSA9IHRoaXMuZWxlbS5hZENvbnRlbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lmcmFtZScpWzBdO1xuICAgIHRoaXMuZWxlbS5hZEJvZHkgPSBkb2N1bWVudCB8fCB0aGlzLmVsZW0uYWRJZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgXG4gICAgLy8gQURURUNIIGxpYnJhcmllc1xuICAgIHRoaXMubGliID0ge307XG4gICAgdGhpcy5saWIudXRpbHMgPSB0YXJnZXRXaW5kb3cuY29tLmFkdGVjaC5VdGlsc18kVkVSU0lPTiQ7XG4gICAgdGhpcy5saWIuZ2xvYmFsRXZlbnRCdXMgPSB0YXJnZXRXaW5kb3cuYWR0ZWNoQWRNYW5hZ2VyXyRWRVJTSU9OJC5nbG9iYWxFdmVudEJ1cztcbiAgICB0aGlzLmxpYi5yaWNoTWVkaWFFdmVudCA9IHRhcmdldFdpbmRvdy5jb20uYWR0ZWNoLlJpY2hNZWRpYUV2ZW50XyRWRVJTSU9OJDtcbiAgXG4gICAgLy8gTWV0YSBkYXRhIHRvIHBhc3MgdG8gY2hpbGRcbiAgICB0aGlzLm1ldGFEYXRhID0ge307XG4gIFxuICAgIC8vIFNldHVwIHJlY2lldmVyXG4gICAgdGhpcy5yZWNpZXZlTWV0YSgpOyAgXG4gIH07XG4gIFxuICAvKipcbiAgICogUGFyZW50IGRhdGEgb2JqZWN0XG4gICAqL1xuICBjdXN0b21BZC5wcm90b3R5cGUuZGF0YSA9IHtcbiAgICB0b3BQb3NpdGlvbiA6IDAsXG4gICAgc2Nyb2xsVG9wIDogMCxcbiAgICB3aW5XaWR0aCA6IDAsXG4gICAgd2luSGVpZ2h0IDogMCxcbiAgICBkb2NIZWlnaHQgOiAwXG4gIH07XG4gIFxuICAvKipcbiAgICogQ2hpbGQgZGF0YVxuICAgKi9cbiAgLy8gY3VzdG9tQWQucHJvdG90eXBlLmNoaWxkRGF0YSA9IHt9XG4gIFxuICAvKipcbiAgICogRmlyZSB0aGlzIHN0dWZmIHdoZW4gcmVhZHkgKGNoaWxkIG1ldGEgaXMgcmVjaWV2ZWQpXG4gICAqL1xuICBjdXN0b21BZC5wcm90b3R5cGUud2hlblJlYWR5ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUHJvY2VzcyBkYXRhIGZyb20gcGFyZW50XG4gICAgdGhpcy5oYW5kbGVQYXJlbnREYXRhKCk7XG4gICAgLy8gU2V0dXAgZGlzcGF0Y2hlclxuICAgIHRoaXMuc2VuZE1ldGEoKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBIYW5kbGUgUGFyZW50IGRhdGFcbiAgICovXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5oYW5kbGVQYXJlbnREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gU2Nyb2xsIHBvc2l0aW9uXG4gICAgdGhpcy5zZXR1cFNjcm9sbERhdGEoKTtcbiAgICAvLyBHZXQgQWQgd3JhcHBlciBwb3NpdGlvbiBkYXRhXG4gICAgdGhpcy5nZXRBZFdyYXBwZXJQb3NpdGlvbigpO1xuICAgIC8vIFNldCBhZHZlcnQgd3JhcHBlciBoZWlnaHRcbiAgICB0aGlzLnNldEFkSGVpZ2h0KCk7XG4gICAgLy8gU2V0dXAgcmVzaXplIGV2ZW50XG4gICAgdGhpcy5zZXR1cFJlc2l6ZSgpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIERpc3BhdGNoIGV2ZW50IHRvIGNoaWxkXG4gICAqL1xuICBjdXN0b21BZC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciByaWNoTWVkaWFFdmVudCA9IG5ldyB0aGlzLmxpYi5yaWNoTWVkaWFFdmVudChldmVudE5hbWUpO1xuICAgIHZhciBkYXRhID0gZGF0YSB8fCB7fTtcbiAgICByaWNoTWVkaWFFdmVudC5tZXRhID0gZGF0YTtcbiAgICB0aGlzLmFkdmVydC5ldmVudEJ1cy5kaXNwYXRjaEV2ZW50KHJpY2hNZWRpYUV2ZW50KTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZW5kIG1ldGEgZGF0YSB0byBjaGlsZCAoYWR2ZXJ0KVxuICAgKi9cbiAgY3VzdG9tQWQucHJvdG90eXBlLnNlbmRNZXRhID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KCdSWU9UX1BBUkVOVF9NRVRBJywgc2VsZi5kYXRhKTtcbiAgICB9LCAxMDApO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFJlY2lldmUgbWV0YSBkYXRhIGZyb20gY2hpbGRcbiAgICovXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5yZWNpZXZlTWV0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBNZXRhIGRhdGFcbiAgICB0aGlzLmFkdmVydC5ldmVudEJ1cy5hZGRFdmVudExpc3RlbmVyKCdSWU9UX0NISUxEX01FVEEnLCBmdW5jdGlvbihlKSB7XG4gICAgICBzZWxmLmRhdGEuZG9jSGVpZ2h0ID0gZS5tZXRhLmRvY0hlaWdodDtcbiAgICAgIC8vIFNldCBhZHZlcnQgd3JhcHBlciBoZWlnaHRcbiAgICAgIHNlbGYuc2V0QWRIZWlnaHQoZS5tZXRhLmRvY0hlaWdodCwgdHJ1ZSk7XG4gICAgICAvLyBNZXRhIGlzIHJlYWR5LCBzbyBmaXJlXG4gICAgICBzZWxmLndoZW5SZWFkeSgpO1xuICAgIH0pO1xuICAgIC8vIENoZWNrIGlmIHdyYXBwZXIgc2hvdWxkIGZpbGwgY29udGFpbmVyXG4gICAgdGhpcy5hZHZlcnQuZXZlbnRCdXMuYWRkRXZlbnRMaXN0ZW5lcignUllPVF9GSUxMV0lEVEgnLCBmdW5jdGlvbihlKSB7XG4gICAgICBzZWxmLnNldEFkVG9GaWxsQ29udGFpbmVyKCk7XG4gICAgICBzZWxmLnNldEFkSGVpZ2h0KHNlbGYuZGF0YS5kb2NIZWlnaHQpO1xuICAgIH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFxuICAgKi9cbiAgY3VzdG9tQWQucHJvdG90eXBlLmdldEFkV3JhcHBlclBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW0uYWRDb250YWluZXI7XG4gICAgdmFyIGJvZHlSZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgZWxlbVJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICB0b3AgPSBlbGVtUmVjdC50b3AgLSBib2R5UmVjdC50b3A7XG4gICAgdGhpcy5kYXRhLnRvcFBvc2l0aW9uID0gdG9wO1xuICB9LFxuICBcbiAgLyoqXG4gICAqIFxuICAgKi9cbiAgY3VzdG9tQWQucHJvdG90eXBlLnNldHVwU2Nyb2xsRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgd2hlZWwsIGZhbHNlICk7XG4gICAgZnVuY3Rpb24gZ2V0U2Nyb2xsVG9wKCkge1xuICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIHZhciB0b3AgPSAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvYy5zY3JvbGxUb3ApICAtIChkb2MuY2xpZW50VG9wIHx8IDApO1xuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9XG4gICAgdmFyIGxhc3RPZmZzZXQgPSBnZXRTY3JvbGxUb3AoKTtcbiAgICB2YXIgbGFzdERhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBmdW5jdGlvbiB3aGVlbChlKSB7XG4gICAgICBzZWxmLmRhdGEuc2Nyb2xsVG9wID0gZ2V0U2Nyb2xsVG9wKCk7XG4gICAgfVxuICAgIHRoaXMuZGF0YS5zY3JvbGxUb3AgPSBnZXRTY3JvbGxUb3AoKTtcbiAgfVxuICBcbiAgY3VzdG9tQWQucHJvdG90eXBlLnNldHVwUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB3aW5TaXplID0gc2VsZi5nZXRXaW5kb3dTaXplKCk7XG4gICAgc2VsZi5kYXRhLndpbldpZHRoID0gd2luU2l6ZS53aWR0aDtcbiAgICBzZWxmLmRhdGEud2luSGVpZ2h0ID0gd2luU2l6ZS5oZWlnaHQ7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoJ1JZT1RfUkVTSVpFJywgc2VsZi5kYXRhKTtcbiAgICB9LCB0cnVlKTtcbiAgICAvLyBSZWNpZXZlIGRhdGFcbiAgICB0aGlzLmFkdmVydC5ldmVudEJ1cy5hZGRFdmVudExpc3RlbmVyKCdSWU9UX0NISUxEX1JFU0laRScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciB3aW5TaXplID0gc2VsZi5nZXRXaW5kb3dTaXplKCk7XG4gICAgICBzZWxmLmRhdGEud2luV2lkdGggPSB3aW5TaXplLndpZHRoO1xuICAgICAgc2VsZi5kYXRhLndpbkhlaWdodCA9IHdpblNpemUuaGVpZ2h0O1xuICAgICAgc2VsZi5zZXRBZEhlaWdodChlLm1ldGEuZG9jSGVpZ2h0KTtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5nZXRXaW5kb3dTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHcgPSB3aW5kb3csXG4gICAgICAgIGQgPSBkb2N1bWVudCxcbiAgICAgICAgZSA9IGQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICBnID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLFxuICAgICAgICB4ID0gdy5pbm5lcldpZHRoIHx8IGUuY2xpZW50V2lkdGggfHwgZy5jbGllbnRXaWR0aCxcbiAgICAgICAgeSA9IHcuaW5uZXJIZWlnaHR8fCBlLmNsaWVudEhlaWdodHx8IGcuY2xpZW50SGVpZ2h0O1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aCA6IHgsXG4gICAgICBoZWlnaHQgOiB5XG4gICAgfTtcbiAgfTtcbiAgXG4gIGN1c3RvbUFkLnByb3RvdHlwZS5zZXRBZEhlaWdodCA9IGZ1bmN0aW9uKGhlaWdodCwgZm9yY2UpIHtcbiAgICBcbiAgICBpZiAodHlwZW9mIGhlaWdodCA9PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIHZhciB0b3BXcmFwcGVyID0gdGhpcy5lbGVtLmFkQ29udGFpbmVyO1xuICAgIHZhciBjb250ZW50V3JhcHBlciA9IHRoaXMuZWxlbS5hZENvbnRlbnQ7XG4gICAgdmFyIGlmcmFtZSA9IGNvbnRlbnRXcmFwcGVyLmZpcnN0Q2hpbGQ7XG4gICAgdmFyIGRvY0JvZHkgPSB0aGlzLmVsZW0uZG9jQm9keTtcbiAgXG4gICAgLy8gVG9wIHdyYXBwZXJcbiAgICAvLyB0b3BXcmFwcGVyLnN0eWxlLndpZHRoID0gXCJhdXRvXCI7XG4gICAgdG9wV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcbiAgXG4gICAgLy8gU3R5bGVcbiAgICBjb250ZW50V3JhcHBlci5zdHlsZS5jbGlwID0gXCJcIjtcbiAgICB0b3BXcmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIHRvcFdyYXBwZXIuc3R5bGUubGVmdCA9IDA7XG4gICAgdG9wV3JhcHBlci5zdHlsZS50b3AgPSAwO1xuICBcbiAgICBpZiAoaGVpZ2h0IT09dGhpcy5kYXRhLmRvY0hlaWdodCB8fCBmb3JjZT09dHJ1ZSkge1xuICBcbiAgICAgIC8vIHRoaXMuZGF0YS5kb2NIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAvLyBoZWlnaHQgPSB0aGlzLmRhdGEuZG9jSGVpZ2h0O1xuICBcbiAgICAgIC8vIHRvcFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gMCArIFwicHhcIjtcbiAgICAgIHRvcFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgLy8gXG4gICAgICAvLyBjb250ZW50V3JhcHBlci5zdHlsZS5oZWlnaHQgPSAwICsgXCJweFwiO1xuICAgICAgY29udGVudFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgLy8gXG4gICAgICAvLyBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gMCArIFwicHhcIjtcbiAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gIFxuICAgICAgLy8gRmluYWxpc2VcbiAgICAgIHRoaXMuZGF0YS5kb2NIZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICB9O1xuICBcbiAgY3VzdG9tQWQucHJvdG90eXBlLnNldEFkVG9GaWxsQ29udGFpbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgdmFyIHRvcFdyYXBwZXIgPSB0aGlzLmVsZW0uYWRDb250YWluZXI7XG4gICAgdmFyIGNvbnRlbnRXcmFwcGVyID0gdGhpcy5lbGVtLmFkQ29udGVudDtcbiAgICB2YXIgaWZyYW1lID0gY29udGVudFdyYXBwZXIuZmlyc3RDaGlsZDtcbiAgICB2YXIgZG9jQm9keSA9IHRoaXMuZWxlbS5kb2NCb2R5O1xuICBcbiAgICB0b3BXcmFwcGVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgY29udGVudFdyYXBwZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICBpZnJhbWUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICBpZnJhbWUud2lkdGggPSBcIjEwMCVcIjtcbiAgXG4gICAgLy8gU2V0IGFkdmVydCB3cmFwcGVyIGhlaWdodFxuICAgIHRoaXMuc2V0QWRIZWlnaHQoKTtcbiAgfTtcblxuICB0YXJnZXRXaW5kb3cuYWR0ZWNoQ2FsbGJhY2tJbnN0YW5jZXMgPSB0YXJnZXRXaW5kb3cuYWR0ZWNoQ2FsbGJhY2tJbnN0YW5jZXMgfHwgW107XG4gIHZhciBpbnN0YW5jZUluZGV4ID0gdGFyZ2V0V2luZG93LmFkdGVjaENhbGxiYWNrSW5zdGFuY2VzLmxlbmd0aDtcbiAgdGFyZ2V0V2luZG93LmFkdGVjaENhbGxiYWNrSW5zdGFuY2VzW2luc3RhbmNlSW5kZXhdID0gbmV3IHRhcmdldFdpbmRvdy5jb20uYWR0ZWNoLkFkdGVjaEN1c3RvbUFkJEFEX0lEJCgpO1xuXG4gIHRhcmdldFdpbmRvdy5hZHRlY2hBZENhbGxiYWNrcyA9IHRhcmdldFdpbmRvdy5hZHRlY2hBZENhbGxiYWNrcyB8fCB7fTtcbiAgdGFyZ2V0V2luZG93LmFkdGVjaEFkQ2FsbGJhY2tzW2FkQ29uZmlnLmFkU2VydmVyVmFycy51aWRdID1cbiAgICAgIHRhcmdldFdpbmRvdy5hZHRlY2hBZENhbGxiYWNrc1thZENvbmZpZy5hZFNlcnZlclZhcnMudWlkXSB8fCBbXTtcbiAgdGFyZ2V0V2luZG93LmFkdGVjaEFkQ2FsbGJhY2tzW2FkQ29uZmlnLmFkU2VydmVyVmFycy51aWRdLnB1c2goXG4gICAgICB0YXJnZXRXaW5kb3cuYWR0ZWNoQ2FsbGJhY2tJbnN0YW5jZXNbaW5zdGFuY2VJbmRleF0pO1xufSkoYWR0ZWNoQWRDb25maWcpOyJdfQ==
